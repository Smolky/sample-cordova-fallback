<!DOCTYPE html>
<html>

    <head>
        
        <title>Web SePLN 2017</title>
        
        <!-- Load libraries -->
        <script type="text/javascript" charset="utf-8" src="cordova.js"></script>
        <script type="text/javascript" charset="utf-8" src="jquery.js"></script>
        <script type="text/javascript" charset="utf-8">
            
            /* body DOM element */
            var body;
            
            
            /* @var ref cordova.InAppBrowser The reference to the browser */
            var ref;
            
            
            /* @var url String */
            var url = "http://sepln2017.um.es";
            
            
            /* @var loaded Boolean Tells wheter the page has been loaded or not */
            var loaded = false;
            
            
            /* @var options String @link https://cordova.apache.org/docs/en/latest/reference/cordova-plugin-inappbrowser/ */
            var options="location=no,hidden=yes,clearcache=yes,toolbar=no,zoom=no,hardwareback=true,useWideViewPort=yes";

            
            // Wait for device API libraries to load
            function onLoad () {
                
                // Fetch body
                body = $('body');
                
                
                // Check
                body.addClass ('loading-state');
                document.addEventListener ("deviceready", onDeviceReady, false);
                
                
                // Offline and online events
                document.addEventListener ("offline", function () {
                
                    // The page is loaded. Unload the browser, back to us
                    if (loaded) {
                        ref.close ();
                        ref = undefined;
                        loaded = false;
                    }
                    
                    body.addClass ('error-state');
                    
                }, false);
                
                
                document.addEventListener ("online", function () {
                
                    if ( ! loaded) {
                        loadPage ();
                    }
                
                    body.removeClass ('error-state');
                }, false);
                
            }
            
            
            // Load WebPage
            function loadPage () {
                    
                // Open
                ref = cordova.InAppBrowser.open (url, "_self", options);
                
                
                // Register events
                // Errors
                ref.addEventListener ('loaderror', loadErrorCallBack);
                
                
                // Stop
                ref.addEventListener ('loadstop', function () { 
                    
                    // Set to loaded
                    loaded = true;
                    
                    
                    // Inject code to add a class to indicate the content
                    // has been loaded whitin some kind of iframe
                    ref.executeScript ({code: "(function() { document.getElementsByTagName ('body')[0].className = document.getElementsByTagName ('body')[0].className.concat (' state-iframe') })()"});
                    
                    
                    // Show browser
                    ref.show ();
                });
                
                
                // Exit application
                ref.addEventListener ('exit', function () {
                
                    // Has the user exit manually?
                    if (loaded) {
                        navigator.app.exitApp ();
                    }
                    
                });
          
            }
            
            
            // Handle error
            function loadErrorCallBack () {
                body.removeClass ('loading-state');
                body.addClass ('error-state');
            }


            // device APIs are available
            function onDeviceReady() {

                // Check connection
                if (navigator.connection.type === Connection.NONE) {
                    loadErrorCallBack ();
                    return;
                } else {
                    loadPage ();

                }
            }
        </script>
        
        <style>
            

            *,
            *::before,
            *::after {
              box-sizing: border-box;
            }

            html, 
            body {  
              height: 100%;
              width: 100%;
            }
            
            html {
              background: #222;
            }
            
            body {
              font-size: 16px;
              overflow-x: hidden;
            }
            
            .messages {
              display: none;
              line-height: 1.5;
              padding: 3rem 3rem;
              font-weight: bold;
              font-family: serif;
              font-size: 1.5rem;
            }

            .spinner {
              display: none;
              width: 64px;
              height: 64px;
              position: relative;
              margin: -32px auto 0 auto;
              top: 50%;
            }

            .double-bounce1, .double-bounce2 {
              width: 100%;
              height: 100%;
              border-radius: 50%;
              background-color: white;
              opacity: 0.6;
              position: absolute;
              top: 0;
              left: 0;

              -webkit-animation: sk-bounce 2.0s infinite ease-in-out;
                      animation: sk-bounce 2.0s infinite ease-in-out;
            }

            .double-bounce2 {
              -webkit-animation-delay: -1.0s;
                      animation-delay: -1.0s;
            }

            @-webkit-keyframes sk-bounce {
              0%, 100% { -webkit-transform: scale(0.0) }
              50% { -webkit-transform: scale(1.0) }
            }

            @keyframes sk-bounce {
              0%, 100% { 
                transform: scale(0.0);
                -webkit-transform: scale(0.0);
              } 50% { 
                transform: scale(1.0);
                -webkit-transform: scale(1.0);
              }
            }
            
            
            body.error-state {
              overflow: hidden;
              text-align: center;
              color: white;
              background-color: crimson;
            }
            
            body.error-state .messages {
              display: block;
            }
            
            body.loading-state .spinner {
              display: block;
            }            

        </style>
        
    </head>

    <body onload="onLoad()">
    
        <div class="spinner">
            <div class="double-bounce1"></div>
            <div class="double-bounce2"></div>
        </div>
    
        <div class="messages">
            <span class="error">
                Ha ocurrido un error. Por favor, asegurese de que est√° conectado a Internet&hellip;
            </span>
        </div>
    </body>
    
</html>